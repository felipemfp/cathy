!function(){"use strict";angular.module("cathy",["ngCookies","ngRoute","ngMaterial","ngMessages","angular-loading-bar","ngAnimate"])}(),function(){"use_strict";function t(t,n,e,a){function o(e,o,i,l){function m(t){200==t.status?a.login(o,i,l):l(!1)}function s(t){n.error("XHR Failed for register.\n"+angular.toJson(t.data,!0)),l(!1)}return t.post(r+"/api/users/",{name:e,username:o,password:i}).then(m)["catch"](s)}var r=e.apiHost,i={register:o};return i}t.$inject=["$http","$log","catherineAPI","authenticationService"],angular.module("cathy").factory("userService",t)}(),function(){"use strict";function t(){function t(t,n){function e(){n.clearToken(),t.path("/")}var a=this;a.signOut=e}t.$inject=["$location","authenticationService"];var n={restrict:"E",templateUrl:"app/components/navbar/navbar.html",controller:t,controllerAs:"vm",bindToController:!0};return n}angular.module("cathy").directive("cathyNavbar",t)}(),function(){"use_strict";function t(){var t="http://catherine-api.herokuapp.com",n={apiHost:t};return n}angular.module("cathy").factory("catherineAPI",t)}(),function(){"use_strict";function t(t,n,e,a){function o(a,o,r){function i(t){r(t.data)}function l(t){e.error("XHR Failed for add.\n"+angular.toJson(t.data,!0)),r(t)}return o||(o="tag"),n.post(m+"/api/"+t.globals.currentUser.username+"/categories/",{name:a,icon_id:o}).then(i)["catch"](l)}function r(a,o){function r(t){o(t.data)}function i(t){e.error("XHR Failed for get.\n"+angular.toJson(t.data,!0)),o(t)}return a?n.get(m+"/api/"+t.globals.currentUser.username+"/categories/"+a).then(r)["catch"](i):n.get(m+"/api/"+t.globals.currentUser.username+"/categories/").then(r)["catch"](i)}function i(a,o){function r(t){o(200==t.status?!0:!1)}function i(t){e.error("XHR Failed for remove.\n"+angular.toJson(t.data,!0)),o(t)}return n["delete"](m+"/api/"+t.globals.currentUser.username+"/categories/"+a).then(r)["catch"](i)}function l(a,o,r){function i(t){r(t.data)}function l(t){e.error("XHR Failed for update.\n"+angular.toJson(t.data,!0)),r(t)}return n.put(m+"/api/"+t.globals.currentUser.username+"/categories/"+a,o).then(i)["catch"](l)}var m=a.apiHost,s={add:o,update:l,remove:i,get:r};return s}t.$inject=["$rootScope","$http","$log","catherineAPI"],angular.module("cathy").factory("categoryService",t)}(),function(){"use_strict";function t(t,n,e,a,o,r){function i(e,a,o){function r(t){var n=t.data.token;l(n),o(!0)}function i(t){n.error("XHR Failed for login.\n"+angular.toJson(t.data,!0)),o(!1)}return t.post(c+"/api/login/",{username:e,password:a}).then(r)["catch"](i)}function l(n){var o=s(n);a.globals={currentUser:{name:o.name,username:o.username,token:n}},t.defaults.headers.common.Authorization="Bearer "+n,e.putObject("globals",a.globals)}function m(){a.globals={},t.defaults.headers.common.Authorization="",e.remove("globals")}function s(t){var n=t.split(".")[1],e=n.replace("-","+").replace("_","/");return angular.fromJson(o.atob(e))}var c=r.apiHost,d={login:i,setToken:l,clearToken:m,parseJwt:s};return d}t.$inject=["$http","$log","$cookies","$rootScope","$window","catherineAPI"],angular.module("cathy").factory("authenticationService",t)}(),function(){"use strict";function t(t,n,e,a,o,r){function i(){var t=m.register.name,r=m.register.username,i=m.register.password;o.register(t,r,i,function(t){t===!0?(n.show(n.simple().textContent(a.globals.currentUser.name+" registered and logged.").hideDelay(3e3)),e.path("/dashboard")):n.show(n.simple().textContent("Something is wrong!").hideDelay(3e3))})}function l(){var t=m.username,o=m.password;r.login(t,o,function(t){t===!0?(n.show(n.simple().textContent(a.globals.currentUser.name+" logged.").hideDelay(3e3)),e.path("/dashboard")):n.show(n.simple().textContent("Username and password does not match.").hideDelay(3e3))})}var m=this;m.signUp=i,m.signIn=l}t.$inject=["$log","$mdToast","$location","$rootScope","userService","authenticationService"],angular.module("cathy").controller("MainController",t)}(),function(){"use strict";function t(t,n){function e(){n.clearUser(),t.path("/")}var a=this;a.signOut=e}t.$inject=["$location","authenticationService"],angular.module("cathy").controller("DashboardController",t)}(),function(){"use strict";function t(t,n,e,a,o,r){if(n.globals=a.getObject("globals")||{},n.globals.currentUser){var i=n.globals.currentUser.token,l=r.parseJwt(i);t.log(Math.round((new Date).getTime()/1e3)<=l.exp,angular.toJson(l)),Math.round((new Date).getTime()/1e3)<=l.exp&&(o.defaults.headers.common.Authorization="Bearer "+i)}n.$on("$locationChangeStart",function(t,a,o){var r="/"!=e.path(),i=n.globals.currentUser;r&&!i?e.path("/"):"/"==e.path()&&i&&e.path("/dashboard")}),t.debug("runBlock end")}t.$inject=["$log","$rootScope","$location","$cookies","$http","authenticationService"],angular.module("cathy").run(t)}(),function(){"use strict";function t(t){t.when("/",{templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"vm"}).when("/dashboard",{templateUrl:"app/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"vm"}).otherwise({redirectTo:"/"})}t.$inject=["$routeProvider"],angular.module("cathy").config(t)}(),function(){"use strict";angular.module("cathy")}(),function(){"use strict";function t(t,n,e){t.debugEnabled(!0),n.theme("default").primaryPalette("purple").accentPalette("green"),e.includeSpinner=!1}t.$inject=["$logProvider","$mdThemingProvider","cfpLoadingBarProvider"],angular.module("cathy").config(t)}(),angular.module("cathy").run(["$templateCache",function(t){t.put("app/dashboard/dashboard.html",'<cathy-navbar></cathy-navbar><main layout=row layout-padding><md-content flex=50><h1>Cath... wait for it!</h1></md-content><md-content flex=30><md-tabs md-dynamic-height md-border-bottom><md-tab label=Categories><md-content class=md-padding><form ng-submit=vm.newCategory() layout=column><md-input-container><label>Name</label><input ng-model=vm.category.name type=text></md-input-container><md-button type=submit class="md-raised md-primary">Add</md-button></form><md-divider></md-divider><md-list flex><md-subheader class=md-no-sticky>Categories</md-subheader><md-list-item class=md-2-line ng-repeat="category in vm.categories"><div class=md-list-item-text><h3>{{ category.name }}</h3><p>{{category.icon_id}}</p></div></md-list-item></md-list><!-- <form ng-submit="vm.signUp()" layout="column">\n            <md-input-container>\n              <label>Name</label>\n              <input ng-model="vm.register.name" type="text">\n            </md-input-container>\n            <md-input-container>\n              <label>Username</label>\n              <input ng-model="vm.register.username" type="text">\n            </md-input-container>\n            <md-input-container>\n              <label>Password</label>\n              <input ng-model="vm.register.password" type="password">\n            </md-input-container>\n            <md-button type="submit" class="md-raised md-primary">Sign Up</md-button>\n          </form> --></md-content></md-tab><md-tab label=People><md-content class=md-padding><!-- <form ng-submit="vm.signIn()" layout="column">\n            <md-input-container>\n              <label>Username</label>\n              <input ng-model="vm.username" type="text">\n            </md-input-container>\n            <md-input-container>\n              <label>Password</label>\n              <input ng-model="vm.password" type="password">\n            </md-input-container>\n            <md-button type="submit" class="md-raised md-primary">Sign In</md-button>\n            <md-button>Problems?</md-button>\n          </form> --></md-content></md-tab></md-tabs></md-content></main>'),t.put("app/main/main.html",'<md-content><header><md-toolbar layout=row layout-align="center center"><div class=md-toolbar-tools><a href=#>Cathy</a><section flex layout=row layout-align="end center"><md-button href=#>Option #1</md-button><md-button href=#>Option #2</md-button><md-button href=#>Option #3</md-button></section></div></md-toolbar></header></md-content><main layout=row layout-padding layout-align="center start"><md-content flex=50><h1>Cath... wait for it!</h1></md-content><md-content flex=30><md-tabs md-dynamic-height md-border-bottom><md-tab label="Sign Up"><md-content class=md-padding><form ng-submit=vm.signUp() layout=column><md-input-container><label>Name</label><input ng-model=vm.register.name type=text></md-input-container><md-input-container><label>Username</label><input ng-model=vm.register.username type=text></md-input-container><md-input-container><label>Password</label><input ng-model=vm.register.password type=password></md-input-container><md-button type=submit class="md-raised md-primary">Sign Up</md-button></form></md-content></md-tab><md-tab label="Sign In"><md-content class=md-padding><form ng-submit=vm.signIn() layout=column><md-input-container><label>Username</label><input ng-model=vm.username type=text></md-input-container><md-input-container><label>Password</label><input ng-model=vm.password type=password></md-input-container><md-button type=submit class="md-raised md-primary">Sign In</md-button><md-button>Problems?</md-button></form></md-content></md-tab></md-tabs></md-content></main>'),t.put("app/components/navbar/navbar.html",'<header><md-toolbar layout=row layout-align="center center"><div class=md-toolbar-tools><a href=#>Cathy</a><section flex layout=row layout-align="end center"><a href=#>{{globals.currentUser.name}}</a><md-button ng-click=vm.signOut()>Sign Out</md-button></section></div></md-toolbar></header>')}]);
//# sourceMappingURL=../maps/scripts/app-7ca44fcf3b.js.map
